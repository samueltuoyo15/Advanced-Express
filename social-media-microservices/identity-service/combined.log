{"level":"info","message":"Server is running on port 5001","service":"identity-service","timestamp":"2025-05-09T14:21:52.758Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-09T14:22:02.369Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T14:04:20.056Z"}
{"code":8000,"codeName":"AtlasError","connectionGeneration":0,"errorLabelSet":{},"errorResponse":{"code":8000,"codeName":"AtlasError","errmsg":"bad auth : authentication failed","ok":0},"level":"error","message":"Failed to connect to mongodb bad auth : authentication failed","ok":0,"service":"identity-service","stack":"MongoServerError: bad auth : authentication failed\n    at Connection.sendCommand (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/connection.ts:551:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/connection.ts:625:22)\n    at async continueScramConversation (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/auth/scram.ts:187:13)\n    at async executeScram (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/auth/scram.ts:114:3)\n    at async ScramSHA1.auth (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/auth/scram.ts:60:12)\n    at async performInitialHandshake (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/connect.ts:164:7)\n    at async connect (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/cmap/connect.ts:43:5)","timestamp":"2025-05-17T14:04:23.674Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T15:02:04.085Z"}
{"code":"ENOTFOUND","hostname":"_mongodb._tcp.cluster0.txibm.mongodb.net","level":"error","message":"Failed to connect to mongodb querySrv ENOTFOUND _mongodb._tcp.cluster0.txibm.mongodb.net","service":"identity-service","stack":"Error: querySrv ENOTFOUND _mongodb._tcp.cluster0.txibm.mongodb.net\n    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/promises:294:17)","syscall":"querySrv","timestamp":"2025-05-17T15:02:04.498Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T15:07:27.507Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-17T15:07:30.434Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","7":" ","level":"error","message":"unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-17T15:07:39.399Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","7":" ","level":"error","message":"unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-17T15:07:39.405Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T15:10:24.368Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-17T15:10:27.351Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","7":" ","level":"error","message":"unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-17T15:10:36.316Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T16:43:35.986Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-17T16:43:39.458Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","level":"error","message":"unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-17T16:43:48.519Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T16:45:45.547Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-17T16:45:49.423Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-17T17:07:22.298Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-17T17:07:22.374Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-17T17:08:07.071Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-17T17:08:07.079Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-17T17:08:07.141Z"}
{"buffer":{"data":[104,40,194,119,217,205,59,80,99,175,43,252],"type":"Buffer"},"level":"warn","message":"user registration successful:","service":"identity-service","timestamp":"2025-05-17T17:08:07.675Z"}
{"level":"error","message":"Internal Server Error secretOrPrivateKey must have a value","service":"identity-service","stack":"Error: secretOrPrivateKey must have a value\n    at Object.module.exports [as sign] (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/jsonwebtoken/sign.js:111:20)\n    at generateTokens (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/src/utils/generateToken.ts:6:27)\n    at registerUser (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/src/controllers/identity.controller.ts:29:63)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-17T17:08:07.714Z"}
{"level":"info","message":"identity service is running on port 3001","service":"identity-service","timestamp":"2025-05-17T17:11:43.488Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-17T17:11:46.425Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-17T17:11:56.768Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-17T17:11:56.770Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-17T17:11:57.188Z"}
{"level":"warn","message":"user already registered:","service":"identity-service","timestamp":"2025-05-17T17:11:57.731Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-17T17:12:04.802Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-17T17:12:04.804Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-17T17:12:04.849Z"}
{"level":"warn","message":"user already registered:","service":"identity-service","timestamp":"2025-05-17T17:12:05.123Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-17T17:12:21.917Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-17T17:12:21.918Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-17T17:12:21.964Z"}
{"buffer":{"data":[104,40,195,118,46,13,193,84,59,101,15,211],"type":"Buffer"},"level":"warn","message":"user registration successful:","service":"identity-service","timestamp":"2025-05-17T17:12:22.267Z"}
{"level":"info","message":"identity service is running on port http://localhost:3001","service":"identity-service","timestamp":"2025-05-18T20:41:56.973Z"}
{"level":"info","message":"Redis Url: redis://localhost:6379","service":"identity-service","timestamp":"2025-05-18T20:41:57.153Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-18T20:42:00.458Z"}
{"level":"info","message":"identity service is running on port http://localhost:3001","service":"identity-service","timestamp":"2025-05-18T21:11:40.346Z"}
{"level":"info","message":"Redis Url: redis://localhost:6379","service":"identity-service","timestamp":"2025-05-18T21:11:40.411Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-18T21:11:43.252Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-18T21:30:23.955Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-18T21:30:23.980Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-18T21:30:24.384Z"}
{"level":"warn","message":"user already registered:","service":"identity-service","timestamp":"2025-05-18T21:30:24.958Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-18T21:30:34.323Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-18T21:30:34.330Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-18T21:30:34.394Z"}
{"buffer":{"data":[104,42,81,122,148,207,9,220,132,97,227,49],"type":"Buffer"},"level":"warn","message":"user registration successful:","service":"identity-service","timestamp":"2025-05-18T21:30:34.730Z"}
{"code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: test.refreshtokens index: token_1 dup key: { token: \"function model(doc, fields, skipId) {\n      model.hooks.execPreSync('createModel', doc);\n      if (!(this instanceof model)) {\n        return new mode...\" }","index":0,"keyPattern":{"token":1},"keyValue":{"token":"function model(doc, fields, skipId) {\n      model.hooks.execPreSync('createModel', doc);\n      if (!(this instanceof model)) {\n        return new model(doc, fields, skipId);\n      }\n      const discriminatorKey = model.schema.options.discriminatorKey;\n\n      if (model.discriminators == null || doc == null || doc[discriminatorKey] == null) {\n        Model.call(this, doc, fields, skipId);\n        return;\n      }\n\n      // If discriminator key is set, use the discriminator instead (gh-7586)\n      const Discriminator = model.discriminators[doc[discriminatorKey]] ||\n        getDiscriminatorByValue(model.discriminators, doc[discriminatorKey]);\n      if (Discriminator != null) {\n        return new Discriminator(doc, fields, skipId);\n      }\n\n      // Otherwise, just use the top-level model\n      Model.call(this, doc, fields, skipId);\n    }"}},"index":0,"keyPattern":{"token":1},"keyValue":{"token":"function model(doc, fields, skipId) {\n      model.hooks.execPreSync('createModel', doc);\n      if (!(this instanceof model)) {\n        return new model(doc, fields, skipId);\n      }\n      const discriminatorKey = model.schema.options.discriminatorKey;\n\n      if (model.discriminators == null || doc == null || doc[discriminatorKey] == null) {\n        Model.call(this, doc, fields, skipId);\n        return;\n      }\n\n      // If discriminator key is set, use the discriminator instead (gh-7586)\n      const Discriminator = model.discriminators[doc[discriminatorKey]] ||\n        getDiscriminatorByValue(model.discriminators, doc[discriminatorKey]);\n      if (Discriminator != null) {\n        return new Discriminator(doc, fields, skipId);\n      }\n\n      // Otherwise, just use the top-level model\n      Model.call(this, doc, fields, skipId);\n    }"},"level":"error","message":"Internal Server Error E11000 duplicate key error collection: test.refreshtokens index: token_1 dup key: { token: \"function model(doc, fields, skipId) {\n      model.hooks.execPreSync('createModel', doc);\n      if (!(this instanceof model)) {\n        return new mode...\" }","service":"identity-service","stack":"MongoServerError: E11000 duplicate key error collection: test.refreshtokens index: token_1 dup key: { token: \"function model(doc, fields, skipId) {\n      model.hooks.execPreSync('createModel', doc);\n      if (!(this instanceof model)) {\n        return new mode...\" }\n    at InsertOneOperation.execute (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/operations/insert.ts:88:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/operations/execute_operation.ts:283:14)\n    at async executeOperation (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/operations/execute_operation.ts:115:12)\n    at async Collection.insertOne (/data/data/com.termux/files/home/Advanced-Express/social-media-microservices/identity-service/node_modules/mongodb/src/collection.ts:285:12)","timestamp":"2025-05-18T21:30:35.312Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: test.users index: full_name_1 dup key: { full_name: \"dhrjfjfngmgmk\" }","index":0,"keyPattern":{"full_name":1},"keyValue":{"full_name":"dhrjfjfngmgmk"}},"index":0,"keyPattern":{"full_name":1},"keyValue":{"full_name":"dhrjfjfngmgmk"},"level":"error","message":"unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-18T21:30:35.790Z"}
{"level":"info","message":"identity service is running on port http://localhost:3001","service":"identity-service","timestamp":"2025-05-18T21:37:15.045Z"}
{"level":"info","message":"Redis Url: redis://localhost:6379","service":"identity-service","timestamp":"2025-05-18T21:37:15.143Z"}
{"level":"info","message":"Connected to MongoDb","service":"identity-service","timestamp":"2025-05-18T21:37:18.012Z"}
{"level":"info","message":"Recieved: POST request to /api/auth/register","service":"identity-service","timestamp":"2025-05-18T21:37:42.914Z"}
{"level":"info","message":"Request Body: undefined","service":"identity-service","timestamp":"2025-05-18T21:37:42.944Z"}
{"level":"info","message":"User Refgistration Started","service":"identity-service","timestamp":"2025-05-18T21:37:43.556Z"}
{"buffer":{"data":[104,42,83,40,108,198,9,195,200,236,114,19],"type":"Buffer"},"level":"warn","message":"user registration successful:","service":"identity-service","timestamp":"2025-05-18T21:37:44.392Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: test.users index: full_name_1 dup key: { full_name: \"dhrjfjfngmgmk\" }","index":0,"keyPattern":{"full_name":1},"keyValue":{"full_name":"dhrjfjfngmgmk"}},"index":0,"keyPattern":{"full_name":1},"keyValue":{"full_name":"dhrjfjfngmgmk"},"level":"error","message":"unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-18T21:37:45.523Z"}
